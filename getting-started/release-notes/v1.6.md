# KubeArmor v1.6 Release Notes

We are excited to announce the release of **KubeArmor v1.6**, packed with powerful new features, significant enhancements, and critical bug fixes that make workload protection and observability even more robust for cloud-native environments.

This release reflects major advancements in policy enforcement, system monitoring, and ecosystem integrations while addressing important stability and performance improvements.

### [Watch the KubeArmor v1.6 Release Overview](https://www.youtube.com/watch?v=lNXBwXRH-TQ)
<img src="https://github.com/user-attachments/assets/fbd6545c-2a7a-4ae4-91f5-87242a5b1c37" alt="KubeArmor v1.6 Release" width="600" />

## v1.6.8 (2026-02-20)

```json
{
  "ğŸ†• New Features": [
    "You can now select a specific container runtime socket file when deploying and running the agent. This change plumbs a validated `--socket-file` option from Helm into snitch so CRI socket selection is explicit and covered by tests.",
    "Host logs and alerts now show usernames instead of only numeric user IDs where possible. This change adds cached UID-to-username resolution and propagates the username through internal types and protobuf APIs into host logging and alerting."
  ],
  "ğŸ Misc": [
    "Test runs can now control LSM ordering more explicitly to better match real deployment environments. This change adds an LSM order flag to the test setup and forwards it into KubeArmor execution.",
    "CI workflows now use the correct Helm values key for setting the kubearmor-operator image tag. This change updates the operator image tag key in CI and aligns it with the Helm chart values used by the pipeline.",
    "Host-only runs and USB log output are now easier to interpret and less likely to be affected by unintended Kubernetes behavior. This change adds timestamps to USB logs, disables Kubernetes mode for the host-only run target via `k8s=false`, and updates platform dependencies including Go and `github.com/cilium/cilium` (Go 1.24.13, Cilium v1.18.4).",
    "The stable release version metadata has been updated to the latest stable series. This change bumps the stable release version from v1.6.6 to v1.6.8.",
    "Some configuration naming and security-scanner handling have been cleaned up to reduce noise and improve consistency. This change renames a Kubernetes secret field and adds gosec suppression comments around known-safe file checks and HTTP calls.",
    "Race-condition tests now complete faster while still exercising key concurrency paths. This change randomizes endpoint removal, shortens test duration, and includes small structural and formatting adjustments."
  ],
  "ğŸœ Bug Fixes": [
    "Endpoint and host policy data handling is now safer under concurrent load to reduce crashes and inconsistent behavior. This change copies slices under read locks, updates originals via keyed lookups under write locks, adds missing endpoint locking in a containerd update path, and includes targeted race-condition tests for these flows.",
    "Alert throttling is now protected against concurrent access issues that could lead to incorrect throttling behavior. This change adds an `RWMutex` around `AlertMap` and uses it consistently inside alert-throttling operations.",
    "Runtime detection now returns the correct runtime based on the socket that was actually matched. This change derives the runtime from the detected socket path via `determineRuntimeFromSocket` (including the `DetectRuntimeViaMap` path) before returning.",
    "RHEL9 build gating is now applied only when it should be, preventing incorrect conditional compilation. This change defines `RHEL9_BUILD_GTE_400` only when the RHEL9 build number is `\u003e= 400`."
  ]
}

```

## Key Features & Enhancements

### ğŸ” **Advanced Process Arguments Matching**

- Introduced **argument-based matching for processes** in policies.

- Allows precise control over command-line arguments, enabling granular process enforcement.

- This feature is currently limited to BPFLSM.

- **Example policy:**

  ```yaml
  apiVersion: security.kubearmor.com/v1
  kind: KubeArmorPolicy
  metadata:
    name: allow-steampipe-args
  spec:
    selector:
      matchLabels:
        app: steampipe
    process:
      matchPaths:
      - path: /usr/bin/python3.6
        allowedArgs:
          - -m
          - modules.steampipe_aws
    action: Block
  ```

### â• **Add support for non-Kubernetes installation through the KubeArmor client**

### ğŸ“¡ **DNS Visibility at Pod-Level**

- Added **DNS query tracing** on UDP to provide insights into domain lookups from workloads.
- Helps detect malicious behaviors like **DGA (Domain Generation Algorithms)** or unauthorized C2 communications.

### ğŸ›¡ï¸ **New Policy Presets**

- **ProtectProc:** Blocks unauthorized access to the `/proc` directory by non-owner processes.
- **ProtectEnv:** Prevents unauthorized access to sensitive environment variables in `/proc/[pid]/environ`.
- **ExecPreset:** Enforces restrictions on external process executions (e.g., via `kubectl exec`).

### ğŸ”Œ **Container Runtime Enhancements**

- **OCI Hooks Support:**
  - Added support for **containerd** and **CRI-O hooks**, eliminating the need for exposing runtime UNIX sockets for container events.

### ğŸ“ˆ **Improved Telemetry and Observability**

- Added **TTY information** in BPF-LSM generated telemetry.
- Enhanced telemetry with **network metadata** using Kubernetes informers.
- Extended alert resources to include **full command arguments**.

### ğŸŒ **Ecosystem and Integrations**

- **OpenSearch Support:** Added OpenSearch as a datasource for process graphs in Grafana dashboards.
- Integrated **image vulnerability scanning workflows** (via Trivy) in release pipelines.

## ğŸ› ï¸ Bug Fixes and Stability Improvements

- Resolved **memory leaks** in AppArmor DaemonSet (observed in AKS clusters).
- Fixed **policy deletion logic** for recommended policies in the operator.
- Addressed **KubeArmorClusterPolicy enforcement issue** for pods created post-policy application.
- Fixed panic errors with uninitialized Docker daemons.
- Resolved **tolerations propagation issues** in Helm chart deployments.
- Improved filtering logic in `karmor profile` commands to respect namespace, pod, and container filters.
- Fixed PID/HostPID and PPID/HostPPID display anomalies (e-notation issues).

## âš™ï¸ Additional Improvements

- Helm charts updated to handle tolerations properly.
- Introduced **conditional deployment** of pod refresh controllers.
- Updated CI pipelines to use Ubuntu 22.04 runners and separated network tests for newer kernels.
- Deprecated legacy Config Watcher in favor of **karmor.yaml configuration**.

## ğŸš¨ Breaking Changes

- **Preset API Specification Updated:**

  - Action is now defined per-preset level:

    ```yaml
    presets:
      - name: protectEnv
        action: Block
    ```

- Configuration changes via `karmor.yaml` will eventually replace existing ConfigMap fields.

## ğŸ“– Documentation Updates

- Revised hardening policies and presets documentation.
- Updated multi-OS deployment instructions and CLI long descriptions.
- Added ModelArmor use-cases and a better getting started guide

## âœ… Upgrade Notes

- Users are advised to review preset configurations and update CRDs accordingly.
- When upgrading from v1.5, ensure Helm charts are updated to leverage new toleration handling and configuration management features.

## ğŸ“Œ Contributors

This release wouldnâ€™t have been possible without the incredible contributions from the community. Special thanks to all contributors for feature development, bug fixes, and reviews. ğŸ™Œ

## ğŸ”— Resources

- ğŸ“š [KubeArmor Documentation](https://docs.kubearmor.io/)
- ğŸ› ï¸ [GitHub Repository](https://github.com/kubearmor/KubeArmor)
- ğŸ“ [Changelog](https://github.com/kubearmor/KubeArmor/releases)
