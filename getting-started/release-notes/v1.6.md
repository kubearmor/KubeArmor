# KubeArmor v1.6 Release Notes

## v1.6.8 Release

- **Date:** 2026-02-25
- **Version:** v1.6.8

### ğŸ†• New Features

```json
{
  "ğŸ†• New Features": [
    "Usernames are now included in host logs and security alerts to make activity easier to interpret. The system caches UID-to-username lookups and propagates usernames through internal types and protobuf APIs so alerts and host logs can display resolved identities.",
    "You can now explicitly select which container runtime socket to use when deploying via Helm. This adds a plumbed `--socket-file` option through Helm into snitch, including validation and test coverage.",
    "Workloads now have clearer and more predictable resource consumption defaults when deployed. The Helm manifests add CPU/memory requests and limits for relay, the KubeArmor controller, the DaemonSet, and snitch."
  ],
  "ğŸ Misc": [
    "CI workflows now use the correct Helm values key for the kubearmor-operator image tag. The pipeline configuration was updated to match the operator chartâ€™s image tag key to keep automated builds and tests aligned.",
    "Test runs can now control and pass through LSM ordering to better match target environments. The test setup accepts an LSM order flag and forwards it into KubeArmor execution during tests.",
    "Host-only run output is now easier to correlate and the host-only target better matches the intended runtime mode. USB logs now include timestamps and the host-only run target sets `k8s=false` to disable Kubernetes mode explicitly.",
    "Dependencies and release metadata were updated to keep builds current and consistent. This includes bumping Go to 1.24.13, updating `github.com/cilium/cilium` to v1.18.4, and updating the stable release version to v1.6.8.",
    "Static analysis noise was reduced while keeping security checks explicit. A Kubernetes secret field was renamed and gosec suppression comments were added around specific file checks and HTTP calls."
  ],
  "ğŸœ Bug Fixes": [
    "Endpoint and host security policy handling is now safer under heavy concurrency to prevent intermittent failures. The implementation copies slices under read locks, updates originals via keyed lookup under write locks, adds missing endpoint locking in the containerd update path, and includes race-condition tests for these flows (with later test randomization and shorter runtimes).",
    "Alert throttling is now thread-safe to prevent data races during high alert volumes. AlertMap is protected with an RWMutex that is used throughout alert-throttling operations, along with minor comment and formatting cleanups.",
    "Container runtime detection is now more reliable when multiple sockets are present. `DetectRuntimeViaMap` derives the runtime from the matched socket file path via `determineRuntimeFromSocket` before returning.",
    "The generated DaemonSet now consistently receives the intended CRI socket argument during manifest generation. The CRI socket argument injection was moved to occur after init container configuration in `generateDaemonset`, ensuring the final spec always includes the correct socket flag.",
    "RHEL9 build gating is now correctly applied so feature flags are only enabled when appropriate. The `RHEL9_BUILD_GTE_400` macro is defined only when the detected RHEL9 build number is `\u003e= 400`."
  ]
}

```

### ğŸ› Bug Fixes

```json
{
  "ğŸ†• New Features": [
    "Usernames are now included in host logs and security alerts to make activity easier to interpret. The system caches UID-to-username lookups and propagates usernames through internal types and protobuf APIs so alerts and host logs can display resolved identities.",
    "You can now explicitly select which container runtime socket to use when deploying via Helm. This adds a plumbed `--socket-file` option through Helm into snitch, including validation and test coverage.",
    "Workloads now have clearer and more predictable resource consumption defaults when deployed. The Helm manifests add CPU/memory requests and limits for relay, the KubeArmor controller, the DaemonSet, and snitch."
  ],
  "ğŸ Misc": [
    "CI workflows now use the correct Helm values key for the kubearmor-operator image tag. The pipeline configuration was updated to match the operator chartâ€™s image tag key to keep automated builds and tests aligned.",
    "Test runs can now control and pass through LSM ordering to better match target environments. The test setup accepts an LSM order flag and forwards it into KubeArmor execution during tests.",
    "Host-only run output is now easier to correlate and the host-only target better matches the intended runtime mode. USB logs now include timestamps and the host-only run target sets `k8s=false` to disable Kubernetes mode explicitly.",
    "Dependencies and release metadata were updated to keep builds current and consistent. This includes bumping Go to 1.24.13, updating `github.com/cilium/cilium` to v1.18.4, and updating the stable release version to v1.6.8.",
    "Static analysis noise was reduced while keeping security checks explicit. A Kubernetes secret field was renamed and gosec suppression comments were added around specific file checks and HTTP calls."
  ],
  "ğŸœ Bug Fixes": [
    "Endpoint and host security policy handling is now safer under heavy concurrency to prevent intermittent failures. The implementation copies slices under read locks, updates originals via keyed lookup under write locks, adds missing endpoint locking in the containerd update path, and includes race-condition tests for these flows (with later test randomization and shorter runtimes).",
    "Alert throttling is now thread-safe to prevent data races during high alert volumes. AlertMap is protected with an RWMutex that is used throughout alert-throttling operations, along with minor comment and formatting cleanups.",
    "Container runtime detection is now more reliable when multiple sockets are present. `DetectRuntimeViaMap` derives the runtime from the matched socket file path via `determineRuntimeFromSocket` before returning.",
    "The generated DaemonSet now consistently receives the intended CRI socket argument during manifest generation. The CRI socket argument injection was moved to occur after init container configuration in `generateDaemonset`, ensuring the final spec always includes the correct socket flag.",
    "RHEL9 build gating is now correctly applied so feature flags are only enabled when appropriate. The `RHEL9_BUILD_GTE_400` macro is defined only when the detected RHEL9 build number is `\u003e= 400`."
  ]
}

```

### ğŸ Misc

```json
{
  "ğŸ†• New Features": [
    "Usernames are now included in host logs and security alerts to make activity easier to interpret. The system caches UID-to-username lookups and propagates usernames through internal types and protobuf APIs so alerts and host logs can display resolved identities.",
    "You can now explicitly select which container runtime socket to use when deploying via Helm. This adds a plumbed `--socket-file` option through Helm into snitch, including validation and test coverage.",
    "Workloads now have clearer and more predictable resource consumption defaults when deployed. The Helm manifests add CPU/memory requests and limits for relay, the KubeArmor controller, the DaemonSet, and snitch."
  ],
  "ğŸ Misc": [
    "CI workflows now use the correct Helm values key for the kubearmor-operator image tag. The pipeline configuration was updated to match the operator chartâ€™s image tag key to keep automated builds and tests aligned.",
    "Test runs can now control and pass through LSM ordering to better match target environments. The test setup accepts an LSM order flag and forwards it into KubeArmor execution during tests.",
    "Host-only run output is now easier to correlate and the host-only target better matches the intended runtime mode. USB logs now include timestamps and the host-only run target sets `k8s=false` to disable Kubernetes mode explicitly.",
    "Dependencies and release metadata were updated to keep builds current and consistent. This includes bumping Go to 1.24.13, updating `github.com/cilium/cilium` to v1.18.4, and updating the stable release version to v1.6.8.",
    "Static analysis noise was reduced while keeping security checks explicit. A Kubernetes secret field was renamed and gosec suppression comments were added around specific file checks and HTTP calls."
  ],
  "ğŸœ Bug Fixes": [
    "Endpoint and host security policy handling is now safer under heavy concurrency to prevent intermittent failures. The implementation copies slices under read locks, updates originals via keyed lookup under write locks, adds missing endpoint locking in the containerd update path, and includes race-condition tests for these flows (with later test randomization and shorter runtimes).",
    "Alert throttling is now thread-safe to prevent data races during high alert volumes. AlertMap is protected with an RWMutex that is used throughout alert-throttling operations, along with minor comment and formatting cleanups.",
    "Container runtime detection is now more reliable when multiple sockets are present. `DetectRuntimeViaMap` derives the runtime from the matched socket file path via `determineRuntimeFromSocket` before returning.",
    "The generated DaemonSet now consistently receives the intended CRI socket argument during manifest generation. The CRI socket argument injection was moved to occur after init container configuration in `generateDaemonset`, ensuring the final spec always includes the correct socket flag.",
    "RHEL9 build gating is now correctly applied so feature flags are only enabled when appropriate. The `RHEL9_BUILD_GTE_400` macro is defined only when the detected RHEL9 build number is `\u003e= 400`."
  ]
}

```

We are excited to announce the release of **KubeArmor v1.6**, packed with powerful new features, significant enhancements, and critical bug fixes that make workload protection and observability even more robust for cloud-native environments.

This release reflects major advancements in policy enforcement, system monitoring, and ecosystem integrations while addressing important stability and performance improvements.

### [Watch the KubeArmor v1.6 Release Overview](https://www.youtube.com/watch?v=lNXBwXRH-TQ)
<img src="https://github.com/user-attachments/assets/fbd6545c-2a7a-4ae4-91f5-87242a5b1c37" alt="KubeArmor v1.6 Release" width="600" />

## Key Features & Enhancements

### ğŸ” **Advanced Process Arguments Matching**

- Introduced **argument-based matching for processes** in policies.

- Allows precise control over command-line arguments, enabling granular process enforcement.

- This feature is currently limited to BPFLSM.

- **Example policy:**

  ```yaml
  apiVersion: security.kubearmor.com/v1
  kind: KubeArmorPolicy
  metadata:
    name: allow-steampipe-args
  spec:
    selector:
      matchLabels:
        app: steampipe
    process:
      matchPaths:
      - path: /usr/bin/python3.6
        allowedArgs:
          - -m
          - modules.steampipe_aws
    action: Block
  ```

### â• **Add support for non-Kubernetes installation through the KubeArmor client**

### ğŸ“¡ **DNS Visibility at Pod-Level**

- Added **DNS query tracing** on UDP to provide insights into domain lookups from workloads.
- Helps detect malicious behaviors like **DGA (Domain Generation Algorithms)** or unauthorized C2 communications.

### ğŸ›¡ï¸ **New Policy Presets**

- **ProtectProc:** Blocks unauthorized access to the `/proc` directory by non-owner processes.
- **ProtectEnv:** Prevents unauthorized access to sensitive environment variables in `/proc/[pid]/environ`.
- **ExecPreset:** Enforces restrictions on external process executions (e.g., via `kubectl exec`).

### ğŸ”Œ **Container Runtime Enhancements**

- **OCI Hooks Support:**
  - Added support for **containerd** and **CRI-O hooks**, eliminating the need for exposing runtime UNIX sockets for container events.

### ğŸ“ˆ **Improved Telemetry and Observability**

- Added **TTY information** in BPF-LSM generated telemetry.
- Enhanced telemetry with **network metadata** using Kubernetes informers.
- Extended alert resources to include **full command arguments**.

### ğŸŒ **Ecosystem and Integrations**

- **OpenSearch Support:** Added OpenSearch as a datasource for process graphs in Grafana dashboards.
- Integrated **image vulnerability scanning workflows** (via Trivy) in release pipelines.

## ğŸ› ï¸ Bug Fixes and Stability Improvements

- Resolved **memory leaks** in AppArmor DaemonSet (observed in AKS clusters).
- Fixed **policy deletion logic** for recommended policies in the operator.
- Addressed **KubeArmorClusterPolicy enforcement issue** for pods created post-policy application.
- Fixed panic errors with uninitialized Docker daemons.
- Resolved **tolerations propagation issues** in Helm chart deployments.
- Improved filtering logic in `karmor profile` commands to respect namespace, pod, and container filters.
- Fixed PID/HostPID and PPID/HostPPID display anomalies (e-notation issues).

## âš™ï¸ Additional Improvements

- Helm charts updated to handle tolerations properly.
- Introduced **conditional deployment** of pod refresh controllers.
- Updated CI pipelines to use Ubuntu 22.04 runners and separated network tests for newer kernels.
- Deprecated legacy Config Watcher in favor of **karmor.yaml configuration**.

## ğŸš¨ Breaking Changes

- **Preset API Specification Updated:**

  - Action is now defined per-preset level:

    ```yaml
    presets:
      - name: protectEnv
        action: Block
    ```

- Configuration changes via `karmor.yaml` will eventually replace existing ConfigMap fields.

## ğŸ“– Documentation Updates

- Revised hardening policies and presets documentation.
- Updated multi-OS deployment instructions and CLI long descriptions.
- Added ModelArmor use-cases and a better getting started guide

## âœ… Upgrade Notes

- Users are advised to review preset configurations and update CRDs accordingly.
- When upgrading from v1.5, ensure Helm charts are updated to leverage new toleration handling and configuration management features.

## ğŸ“Œ Contributors

This release wouldnâ€™t have been possible without the incredible contributions from the community. Special thanks to all contributors for feature development, bug fixes, and reviews. ğŸ™Œ

## ğŸ”— Resources

- ğŸ“š [KubeArmor Documentation](https://docs.kubearmor.io/)
- ğŸ› ï¸ [GitHub Repository](https://github.com/kubearmor/KubeArmor)
- ğŸ“ [Changelog](https://github.com/kubearmor/KubeArmor/releases)
