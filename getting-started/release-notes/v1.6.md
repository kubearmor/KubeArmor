# KubeArmor v1.6 Release Notes

We are excited to announce the release of **KubeArmor v1.6**, packed with powerful new features, significant enhancements, and critical bug fixes that make workload protection and observability even more robust for cloud-native environments.

This release reflects major advancements in policy enforcement, system monitoring, and ecosystem integrations while addressing important stability and performance improvements.

## KubeArmor v1.6.8 (2026-02-25)

### ğŸ†• New Features

### ğŸ› Bug Fixes

### ğŸ Misc

```json
{
  "ğŸ†• New Features": [
    "Added automatic runtime identification so the system can determine which container runtime is in use from the socket it finds. Specifically, runtime detection now derives the runtime via `determineRuntimeFromSocket` using the matched socket file path returned by `DetectRuntimeViaMap`.",
    "Added support for explicitly selecting the container runtime socket so deployments can target the correct CRI endpoint when multiple sockets are present. Specifically, a `--socket-file` option is now plumbed from Helm into `snitch`, including validation and test coverage.",
    "Added faster username lookups so host logs and alerts can show human-readable identities more reliably. Specifically, the system now caches UID-to-username resolution and propagates usernames through internal types and protobuf APIs into host logging and alerting."
  ],
  "ğŸ Misc": [
    "Improved stability testing by making concurrency tests more representative while keeping them quicker to run. Specifically, the race-condition tests now randomize endpoint removal, shorten runtime, and include minor structural and formatting cleanups.",
    "Improved resource planning defaults so the deployed components request and limit appropriate CPU/memory. Specifically, resource requests/limits were added to relay, the KubeArmor controller, the DaemonSet, and snitch workloads.",
    "Improved DaemonSet generation so CRI socket arguments are always applied in the correct order during rendering. Specifically, CRI socket argument injection was moved to occur after init container configuration in `generateDaemonset`, and the generated DaemonSet is enforced to always set a CRI socket argument.",
    "Improved host-only runs and USB audit readability so logs are easier to interpret and host mode behaves predictably. Specifically, USB logs now include timestamps and the host-only run target now sets `k8s=false`.",
    "Updated core dependencies to keep builds current and compatible. Specifically, Go was bumped to `1.24.13` and `github.com/cilium/cilium` was bumped to `v1.18.4`.",
    "Updated release metadata so the published stable version reflects the latest maintained patch level. Specifically, the stable release version was updated from `v1.6.6` to `v1.6.8`.",
    "Improved test and CI configuration consistency so Helm-based image tag keys and test flags align with current conventions. Specifically, CI workflows were updated to use the correct Helm value key for the `kubearmor-operator` image tag, and KubeArmor tests now propagate an LSM order flag into execution."
  ],
  "ğŸœ Bug Fixes": [
    "Fixed potential race conditions when multiple processes access endpoint and host policy data at the same time. Specifically, the implementation now copies slices under read locks, updates originals via keyed lookup under write locks, adds missing endpoint locking in a containerd update path, and includes dedicated race-condition tests for these flows.",
    "Fixed a build-time condition so a RHEL9 macro is only enabled when the OS build number actually meets the required threshold. Specifically, `RHEL9_BUILD_GTE_400` is now defined only when the RHEL9 build number is `\u003e= 400`."
  ]
}

```

### [Watch the KubeArmor v1.6 Release Overview](https://www.youtube.com/watch?v=lNXBwXRH-TQ)
<img src="https://github.com/user-attachments/assets/fbd6545c-2a7a-4ae4-91f5-87242a5b1c37" alt="KubeArmor v1.6 Release" width="600" />

## Key Features & Enhancements

### ğŸ” **Advanced Process Arguments Matching**

- Introduced **argument-based matching for processes** in policies.

- Allows precise control over command-line arguments, enabling granular process enforcement.

- This feature is currently limited to BPFLSM.

- **Example policy:**

  ```yaml
  apiVersion: security.kubearmor.com/v1
  kind: KubeArmorPolicy
  metadata:
    name: allow-steampipe-args
  spec:
    selector:
      matchLabels:
        app: steampipe
    process:
      matchPaths:
      - path: /usr/bin/python3.6
        allowedArgs:
          - -m
          - modules.steampipe_aws
    action: Block
  ```

### â• **Add support for non-Kubernetes installation through the KubeArmor client**

### ğŸ“¡ **DNS Visibility at Pod-Level**

- Added **DNS query tracing** on UDP to provide insights into domain lookups from workloads.
- Helps detect malicious behaviors like **DGA (Domain Generation Algorithms)** or unauthorized C2 communications.

### ğŸ›¡ï¸ **New Policy Presets**

- **ProtectProc:** Blocks unauthorized access to the `/proc` directory by non-owner processes.
- **ProtectEnv:** Prevents unauthorized access to sensitive environment variables in `/proc/[pid]/environ`.
- **ExecPreset:** Enforces restrictions on external process executions (e.g., via `kubectl exec`).

### ğŸ”Œ **Container Runtime Enhancements**

- **OCI Hooks Support:**
  - Added support for **containerd** and **CRI-O hooks**, eliminating the need for exposing runtime UNIX sockets for container events.

### ğŸ“ˆ **Improved Telemetry and Observability**

- Added **TTY information** in BPF-LSM generated telemetry.
- Enhanced telemetry with **network metadata** using Kubernetes informers.
- Extended alert resources to include **full command arguments**.

### ğŸŒ **Ecosystem and Integrations**

- **OpenSearch Support:** Added OpenSearch as a datasource for process graphs in Grafana dashboards.
- Integrated **image vulnerability scanning workflows** (via Trivy) in release pipelines.

## ğŸ› ï¸ Bug Fixes and Stability Improvements

- Resolved **memory leaks** in AppArmor DaemonSet (observed in AKS clusters).
- Fixed **policy deletion logic** for recommended policies in the operator.
- Addressed **KubeArmorClusterPolicy enforcement issue** for pods created post-policy application.
- Fixed panic errors with uninitialized Docker daemons.
- Resolved **tolerations propagation issues** in Helm chart deployments.
- Improved filtering logic in `karmor profile` commands to respect namespace, pod, and container filters.
- Fixed PID/HostPID and PPID/HostPPID display anomalies (e-notation issues).

## âš™ï¸ Additional Improvements

- Helm charts updated to handle tolerations properly.
- Introduced **conditional deployment** of pod refresh controllers.
- Updated CI pipelines to use Ubuntu 22.04 runners and separated network tests for newer kernels.
- Deprecated legacy Config Watcher in favor of **karmor.yaml configuration**.

## ğŸš¨ Breaking Changes

- **Preset API Specification Updated:**

  - Action is now defined per-preset level:

    ```yaml
    presets:
      - name: protectEnv
        action: Block
    ```

- Configuration changes via `karmor.yaml` will eventually replace existing ConfigMap fields.

## ğŸ“– Documentation Updates

- Revised hardening policies and presets documentation.
- Updated multi-OS deployment instructions and CLI long descriptions.
- Added ModelArmor use-cases and a better getting started guide

## âœ… Upgrade Notes

- Users are advised to review preset configurations and update CRDs accordingly.
- When upgrading from v1.5, ensure Helm charts are updated to leverage new toleration handling and configuration management features.

## ğŸ“Œ Contributors

This release wouldnâ€™t have been possible without the incredible contributions from the community. Special thanks to all contributors for feature development, bug fixes, and reviews. ğŸ™Œ

## ğŸ”— Resources

- ğŸ“š [KubeArmor Documentation](https://docs.kubearmor.io/)
- ğŸ› ï¸ [GitHub Repository](https://github.com/kubearmor/KubeArmor)
- ğŸ“ [Changelog](https://github.com/kubearmor/KubeArmor/releases)
