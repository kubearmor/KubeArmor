# KubeArmor v1.6 Release Notes

## KubeArmor v1.6.6

**Date:** 2026-01-28  
**Version:** v1.6.6

### ğŸ†• New Features

### ğŸœ Bug Fixes

### ğŸ Misc

```json
{
  "ğŸ†• New Features": [
    "You can now match and enforce policies based on the arguments a process was started with. This adds configurable process-argument matching by capturing `execve` argv in BPF, exposing `allowedArgs` in policy CRDs (with documented limits), and enforcing the resulting rules in the LSM exec path, including owner-only enforcement support.",
    "You can now disable LSM-based enforcement explicitly when you donâ€™t want any runtime enforcer to run. This adds support for an explicit LSM order of `none`, skips LSM detection/initialization when configured, propagates the setting through the operator/DaemonSet and snitch arguments, and logs that enforcement is disabled."
  ],
  "ğŸ Misc": [
    "The Go codebase has been modernized without changing intended behavior. This refactors multiple packages to use newer Go idioms and standard-library helpers (for example `any`, `slices.Sort`, `maps.Copy`, `strings.SplitSeq`, `ReplaceAll`, and updated `switch` patterns) and updates gRPC client construction to use non-deprecated insecure credentials.",
    "Continuous integration tests are now more stable and representative of the expected workloads. This switches block-posture tests to an nginx-based app and adjusts multiple CI timeouts, sleeps, and log/alert waiting windows to reduce flakiness.",
    "Build, release, and security-scanning dependencies have been updated to current versions. This upgrades the CodeQL GitHub Action from v3 to v4, updates Alpine builder/runtime base images, and bumps KubeArmor/KubeArmorOperator Helm chart and application versions from v1.6.5 to v1.6.6 (including the stable release version).",
    "Documentation and examples have been updated to better reflect supported environments and usage. This documents BPF-LSM and CentOS 9 support, clarifies Vagrant usage, and annotates the CentOS 9 kernel version in the Vagrantfile.",
    "Configuration handling has been made more flexible for runtime operation and logging. This makes the untracked namespaces setting runtime-updatable via an atomic value and adds a flag to optionally omit the `Resource` field from process visibility logs by updating log marshaling to honor the setting.",
    "Command-line and operator configuration has been simplified to reduce duplication and improve consistency. This refactors snitch CLI configuration into a `SnitchOptions` struct and centralizes operator options into a shared struct that also propagates the LSM order into the KubeArmor DaemonSet and snitch arguments.",
    "Repository metadata has been refreshed for the current year. This updates copyright headers across the repository to use year 2026."
  ],
  "ğŸ› Bug Fixes": [
    "Cleanup operations are now safer and less likely to delete unintended paths. This introduces shared safe file/directory removal helpers that refuse to delete empty or root paths, replaces several direct `os.Remove/RemoveAll` cleanup call sites, and ensures `SELinuxProfileDir` is loaded from configuration before use.",
    "Kernel event handling is now more robust when recording the protocol name for TCP connect events. This changes the BPF-side implementation to copy the protocol name into a fixed stack buffer using `bpf_probe_read_str` instead of directly dereferencing `skc_prot-\u003ename` before storing it into args.",
    "Policy and eBPF key sizing is now consistent with documented limits to avoid truncation and mismatches. This enforces 200-character limits for path/exec/args in CRDs and BPF keys and aligns internal structures by reducing InnerKey `Path` and `Source` byte arrays from 256 to 200, alongside improved BPF map cleanup."
  ]
}

```

---

We are excited to announce the release of **KubeArmor v1.6**, packed with powerful new features, significant enhancements, and critical bug fixes that make workload protection and observability even more robust for cloud-native environments.

This release reflects major advancements in policy enforcement, system monitoring, and ecosystem integrations while addressing important stability and performance improvements.

### [Watch the KubeArmor v1.6 Release Overview](https://www.youtube.com/watch?v=lNXBwXRH-TQ)
<img src="https://github.com/user-attachments/assets/fbd6545c-2a7a-4ae4-91f5-87242a5b1c37" alt="KubeArmor v1.6 Release" width="600" />

## Key Features & Enhancements

### ğŸ” **Advanced Process Arguments Matching**

- Introduced **argument-based matching for processes** in policies.

- Allows precise control over command-line arguments, enabling granular process enforcement.

- This feature is currently limited to BPFLSM.

- **Example policy:**

  ```yaml
  apiVersion: security.kubearmor.com/v1
  kind: KubeArmorPolicy
  metadata:
    name: allow-steampipe-args
  spec:
    selector:
      matchLabels:
        app: steampipe
    process:
      matchPaths:
      - path: /usr/bin/python3.6
        allowedArgs:
          - -m
          - modules.steampipe_aws
    action: Block
  ```

### â• **Add support for non-Kubernetes installation through the KubeArmor client**

### ğŸ“¡ **DNS Visibility at Pod-Level**

- Added **DNS query tracing** on UDP to provide insights into domain lookups from workloads.
- Helps detect malicious behaviors like **DGA (Domain Generation Algorithms)** or unauthorized C2 communications.

### ğŸ›¡ï¸ **New Policy Presets**

- **ProtectProc:** Blocks unauthorized access to the `/proc` directory by non-owner processes.
- **ProtectEnv:** Prevents unauthorized access to sensitive environment variables in `/proc/[pid]/environ`.
- **ExecPreset:** Enforces restrictions on external process executions (e.g., via `kubectl exec`).

### ğŸ”Œ **Container Runtime Enhancements**

- **OCI Hooks Support:**
  - Added support for **containerd** and **CRI-O hooks**, eliminating the need for exposing runtime UNIX sockets for container events.

### ğŸ“ˆ **Improved Telemetry and Observability**

- Added **TTY information** in BPF-LSM generated telemetry.
- Enhanced telemetry with **network metadata** using Kubernetes informers.
- Extended alert resources to include **full command arguments**.

### ğŸŒ **Ecosystem and Integrations**

- **OpenSearch Support:** Added OpenSearch as a datasource for process graphs in Grafana dashboards.
- Integrated **image vulnerability scanning workflows** (via Trivy) in release pipelines.

## ğŸ› ï¸ Bug Fixes and Stability Improvements

- Resolved **memory leaks** in AppArmor DaemonSet (observed in AKS clusters).
- Fixed **policy deletion logic** for recommended policies in the operator.
- Addressed **KubeArmorClusterPolicy enforcement issue** for pods created post-policy application.
- Fixed panic errors with uninitialized Docker daemons.
- Resolved **tolerations propagation issues** in Helm chart deployments.
- Improved filtering logic in `karmor profile` commands to respect namespace, pod, and container filters.
- Fixed PID/HostPID and PPID/HostPPID display anomalies (e-notation issues).

## âš™ï¸ Additional Improvements

- Helm charts updated to handle tolerations properly.
- Introduced **conditional deployment** of pod refresh controllers.
- Updated CI pipelines to use Ubuntu 22.04 runners and separated network tests for newer kernels.
- Deprecated legacy Config Watcher in favor of **karmor.yaml configuration**.

## ğŸš¨ Breaking Changes

- **Preset API Specification Updated:**

  - Action is now defined per-preset level:

    ```yaml
    presets:
      - name: protectEnv
        action: Block
    ```

- Configuration changes via `karmor.yaml` will eventually replace existing ConfigMap fields.

## ğŸ“– Documentation Updates

- Revised hardening policies and presets documentation.
- Updated multi-OS deployment instructions and CLI long descriptions.
- Added ModelArmor use-cases and a better getting started guide

## âœ… Upgrade Notes

- Users are advised to review preset configurations and update CRDs accordingly.
- When upgrading from v1.5, ensure Helm charts are updated to leverage new toleration handling and configuration management features.

## ğŸ“Œ Contributors

This release wouldnâ€™t have been possible without the incredible contributions from the community. Special thanks to all contributors for feature development, bug fixes, and reviews. ğŸ™Œ

## ğŸ”— Resources

- ğŸ“š [KubeArmor Documentation](https://docs.kubearmor.io/)
- ğŸ› ï¸ [GitHub Repository](https://github.com/kubearmor/KubeArmor)
- ğŸ“ [Changelog](https://github.com/kubearmor/KubeArmor/releases)
