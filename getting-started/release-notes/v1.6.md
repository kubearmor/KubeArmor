# KubeArmor v1.6 Release Notes

We are excited to announce the release of **KubeArmor v1.6**, packed with powerful new features, significant enhancements, and critical bug fixes that make workload protection and observability even more robust for cloud-native environments.

This release reflects major advancements in policy enforcement, system monitoring, and ecosystem integrations while addressing important stability and performance improvements.

### [Watch the KubeArmor v1.6 Release Overview](https://www.youtube.com/watch?v=lNXBwXRH-TQ)
<img src="https://github.com/user-attachments/assets/fbd6545c-2a7a-4ae4-91f5-87242a5b1c37" alt="KubeArmor v1.6 Release" width="600" />

## Key Features & Enhancements

### üîê **Advanced Process Arguments Matching**

- Introduced **argument-based matching for processes** in policies.

- Allows precise control over command-line arguments, enabling granular process enforcement.

- This feature is currently limited to BPFLSM.

- **Example policy:**

  ```yaml
  apiVersion: security.kubearmor.com/v1
  kind: KubeArmorPolicy
  metadata:
    name: allow-steampipe-args
  spec:
    selector:
      matchLabels:
        app: steampipe
    process:
      matchPaths:
      - path: /usr/bin/python3.6
        allowedArgs:
          - -m
          - modules.steampipe_aws
    action: Block
  ```

### ‚ûï **Add support for non-Kubernetes installation through the KubeArmor client**

### üì° **DNS Visibility at Pod-Level**

- Added **DNS query tracing** on UDP to provide insights into domain lookups from workloads.
- Helps detect malicious behaviors like **DGA (Domain Generation Algorithms)** or unauthorized C2 communications.

### üõ°Ô∏è **New Policy Presets**

- **ProtectProc:** Blocks unauthorized access to the `/proc` directory by non-owner processes.
- **ProtectEnv:** Prevents unauthorized access to sensitive environment variables in `/proc/[pid]/environ`.
- **ExecPreset:** Enforces restrictions on external process executions (e.g., via `kubectl exec`).

### üîå **Container Runtime Enhancements**

- **OCI Hooks Support:**
  - Added support for **containerd** and **CRI-O hooks**, eliminating the need for exposing runtime UNIX sockets for container events.

### üìà **Improved Telemetry and Observability**

- Added **TTY information** in BPF-LSM generated telemetry.
- Enhanced telemetry with **network metadata** using Kubernetes informers.
- Extended alert resources to include **full command arguments**.

### üåê **Ecosystem and Integrations**

- **OpenSearch Support:** Added OpenSearch as a datasource for process graphs in Grafana dashboards.
- Integrated **image vulnerability scanning workflows** (via Trivy) in release pipelines.

## üõ†Ô∏è Bug Fixes and Stability Improvements

- Resolved **memory leaks** in AppArmor DaemonSet (observed in AKS clusters).
- Fixed **policy deletion logic** for recommended policies in the operator.
- Addressed **KubeArmorClusterPolicy enforcement issue** for pods created post-policy application.
- Fixed panic errors with uninitialized Docker daemons.
- Resolved **tolerations propagation issues** in Helm chart deployments.
- Improved filtering logic in `karmor profile` commands to respect namespace, pod, and container filters.
- Fixed PID/HostPID and PPID/HostPPID display anomalies (e-notation issues).

## ‚öôÔ∏è Additional Improvements

- Helm charts updated to handle tolerations properly.
- Introduced **conditional deployment** of pod refresh controllers.
- Updated CI pipelines to use Ubuntu 22.04 runners and separated network tests for newer kernels.
- Deprecated legacy Config Watcher in favor of **karmor.yaml configuration**.

## üö® Breaking Changes

- **Preset API Specification Updated:**

  - Action is now defined per-preset level:

    ```yaml
    presets:
      - name: protectEnv
        action: Block
    ```

- Configuration changes via `karmor.yaml` will eventually replace existing ConfigMap fields.

## üìñ Documentation Updates

- Revised hardening policies and presets documentation.
- Updated multi-OS deployment instructions and CLI long descriptions.
- Added ModelArmor use-cases and a better getting started guide

## ‚úÖ Upgrade Notes

- Users are advised to review preset configurations and update CRDs accordingly.
- When upgrading from v1.5, ensure Helm charts are updated to leverage new toleration handling and configuration management features.

## üìå Contributors

This release wouldn‚Äôt have been possible without the incredible contributions from the community. Special thanks to all contributors for feature development, bug fixes, and reviews. üôå

## v1.6.4 (2025-11-05)

### New Features

- Added structured telemetry via an EventData field to include richer context in alerts and events. [#2204](https://github.com/kubearmor/KubeArmor/pull/2204)
- Added USB Device Observability to monitor USB device activity and attributes. [#2172](https://github.com/kubearmor/KubeArmor/pull/2172)
- Added USB Device Enforcement with a new USB Device Handler and HSP CRD updates to allow/deny by device class and attributes. [#2194](https://github.com/kubearmor/KubeArmor/pull/2194)
- Added File Integrity Monitoring using IMA hash matching and introduced IMA visibility with dynamic (un)initialization. [#2170](https://github.com/kubearmor/KubeArmor/pull/2170)
- Added support for non‚ÄëKubernetes (unorchestrated) environments via OCI hooks for Podman (rootful/rootless). [#1874](https://github.com/kubearmor/KubeArmor/pull/1874)

### Improvements

- Added operator configuration for nodeSelector and environment variables through the KubeArmorConfig CRD. [#2187](https://github.com/kubearmor/KubeArmor/pull/2187)
- Corrected Helm tolerations indentation in the operator template to ensure proper scheduling behavior. [#2138](https://github.com/kubearmor/KubeArmor/pull/2138)
- Moved imagePullSecrets under `.Values.kubearmorOperator.image.imagePullSecrets` in the Helm chart for consistency. [#2190](https://github.com/kubearmor/KubeArmor/pull/2190)
- Updated preset alerts to include the `action` field for consistent alert semantics. [#2210](https://github.com/kubearmor/KubeArmor/pull/2210)

### Bug Fixes

- Fixed missing `action` in syscall logs to improve auditability. [#2169](https://github.com/kubearmor/KubeArmor/pull/2169)
- Fixed panic when updating node selectors in the operator controller. [#2193](https://github.com/kubearmor/KubeArmor/pull/2193)
- Fixed missing labels in emitted events. [b54a8d93](https://github.com/kubearmor/KubeArmor/commit/b54a8d932f9c629aef1c174ccf5ecfc1b84a882a)
- Ensured CRI‚ÄëO 1.34 compatibility by adding the `docker.io` repository prefix to images. [c8e52045](https://github.com/kubearmor/KubeArmor/commit/c8e52045be14a8a20139336c2fb78b10b2271def)

### Dependencies and Security

- Bumped `cilium/ebpf` to resolve BTF parsing issues. [#2200](https://github.com/kubearmor/KubeArmor/pull/2200)
- Upgraded Go toolchain to address security vulnerabilities. [79083909](https://github.com/kubearmor/KubeArmor/commit/7908390979dd094a7b341d26253c2b0b039c0e3a)
- Upgraded Docker-related packages to address vulnerabilities. [94386b37](https://github.com/kubearmor/KubeArmor/commit/94386b37cd5bbb67ccde68c74f8cb1ed093cd0f2)
- Resolved gosec/govuln findings across the codebase. [916429fa](https://github.com/kubearmor/KubeArmor/commit/916429fad08fa36d701d53badfc89e5019f7d5ef)

### Documentation

- Updated FAQ to optionally use `grubby` for enabling BPF‚ÄëLSM on RHEL. [#2174](https://github.com/kubearmor/KubeArmor/pull/2174)
- Fixed script paths in the Testing Guide. [083dafce](https://github.com/kubearmor/KubeArmor/commit/083dafcefffae792e209e47540ab3ba4f67a0ae1)

## üîó Resources

- üìö [KubeArmor Documentation](https://docs.kubearmor.io/)
- üõ†Ô∏è [GitHub Repository](https://github.com/kubearmor/KubeArmor)
- üìù [Changelog](https://github.com/kubearmor/KubeArmor/releases)
